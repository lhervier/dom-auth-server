<?xml version="1.0" encoding="UTF-8"?>
<faces-config>
  <!-- Bean pour accéder au paramétrage -->
  <managed-bean>
    <managed-bean-name>paramsBean</managed-bean-name>
    <managed-bean-class>com.github.lhervier.domino.oauth.library.server.bean.ParamsBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
    <managed-property>
  		<property-name>notesContext</property-name>
  		<value>#{notesContext}</value>
  	</managed-property>
  </managed-bean>
  
  <!-- Bean to access the nab -->
  <managed-bean>
  	<managed-bean-name>nabBean</managed-bean-name>
  	<managed-bean-class>com.github.lhervier.domino.oauth.library.server.bean.NabBean</managed-bean-class>
  	<managed-bean-scope>session</managed-bean-scope>
  	<managed-property>
  		<property-name>notesContext</property-name>
  		<value>#{notesContext}</value>
  	</managed-property>
  	<managed-property>
  		<property-name>httpContext</property-name>
  		<value>#{httpContext}</value>
  	</managed-property>
  	<managed-property>
  		<property-name>paramsBean</property-name>
  		<value>#{paramsBean}</value>
  	</managed-property>
  </managed-bean>
  
  <!-- Bean pour accéder au secret Ltpa -->
  <managed-bean>
    <managed-bean-name>secretBean</managed-bean-name>
    <managed-bean-class>com.github.lhervier.domino.oauth.library.server.bean.SecretBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
    	<property-name>paramsBean</property-name>
    	<value>#{paramsBean}</value>
    </managed-property>
    <managed-property>
    	<property-name>nabBean</property-name>
    	<value>#{nabBean}</value>
    </managed-property>
  </managed-bean>
  
  <!-- Bean pour manipuler les applications OAUTH -->
  <managed-bean>
    <managed-bean-name>appBean</managed-bean-name>
    <managed-bean-class>com.github.lhervier.domino.oauth.library.server.bean.AppBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
    	<property-name>notesContext</property-name>
    	<value>#{notesContext}</value>
    </managed-property>
    <managed-property>
    	<property-name>nabBean</property-name>
    	<value>#{nabBean}</value>
    </managed-property>
    <managed-property>
    	<property-name>paramsBean</property-name>
    	<value>#{paramsBean}</value>
    </managed-property>
  </managed-bean>
  
  <!-- Bean pour gérer le endpoint Authorize -->
  <managed-bean>
    <managed-bean-name>authorizeBean</managed-bean-name>
    <managed-bean-class>com.github.lhervier.domino.oauth.library.server.bean.AuthorizeBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
    	<property-name>notesContext</property-name>
    	<value>#{notesContext}</value>
    </managed-property>
    <managed-property>
    	<property-name>httpContext</property-name>
    	<value>#{httpContext}</value>
    </managed-property>
    <managed-property>
    	<property-name>appBean</property-name>
    	<value>#{appBean}</value>
    </managed-property>
    <managed-property>
    	<property-name>paramsBean</property-name>
    	<value>#{paramsBean}</value>
    </managed-property>
  </managed-bean>
  
  <!-- Bean pour gérer le endpoint Token -->
  <managed-bean>
    <managed-bean-name>tokenBean</managed-bean-name>
    <managed-bean-class>com.github.lhervier.domino.oauth.library.server.bean.TokenBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
    	<property-name>notesContext</property-name>
    	<value>#{notesContext}</value>
    </managed-property>
    <managed-property>
    	<property-name>httpContext</property-name>
    	<value>#{httpContext}</value>
    </managed-property>
    <managed-property>
    	<property-name>appBean</property-name>
    	<value>#{appBean}</value>
    </managed-property>
    <managed-property>
    	<property-name>secretBean</property-name>
    	<value>#{secretBean}</value>
    </managed-property>
    <managed-property>
    	<property-name>paramsBean</property-name>
    	<value>#{paramsBean}</value>
    </managed-property>
  </managed-bean>
  
  <!-- Vérification du rôle à chaque chargement de XPage -->
  <!-- FIXME: Utilise un phaseListener à la place -->
  <managed-bean>
    <managed-bean-name>utils</managed-bean-name>
    <managed-bean-class>com.github.lhervier.domino.oauth.library.server.utils.XspUtils</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
  </managed-bean>
</faces-config>
